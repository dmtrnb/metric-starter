# Кастомный spring-boot-starter

Реализация стартера, позволяющего измерять время работы метода посредством "навешивания" аннотация Timed.
Аннотация работает с методами и классами. В последнем случае измеряется время работы всех методов класса.

Стартер подключается в зависимостях проекта. Для настройки работы есть два property: enabled и limit.
Первое принимает boolean, включает/отключает сбор метрик, по умолчанию, отключено.
Второе устанавливает ограничения на количество метрик для каждого метода (по умолчанию, 10000). При превышении ограничения более старые метрики затираются.

В проекте присутствует бин MetricStatProviderImpl, который реализует интерфейс доступа к метрикам (по имени метода, ко всем, по временному периоду).

Сбор метрик организован через имплементацию PostBeanProcessor`а. Мы подменяем нужные нам бины их прокси.
Стоит отметить, что в зависимости от того, реализует ли класс какой-либо интерфейс, или нет, мы используем различные реализации Proxy.
Интерфейсы имплементируются - JDK Proxy, нет - cglib, что обеспечивает гибкость реализации.